(function(e){e.fn.tweet=function(t){function r(e){return Date.parse(e.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))}function i(e){var t=r(e),n=arguments.length>1?arguments[1]:new Date,i=parseInt((n.getTime()-t)/1e3),s="";return i<60?s=i+" seconds ago":i<120?s="a minute ago":i<2700?s=parseInt(i/60,10).toString()+" minutes ago":i<7200?s="an hour ago":i<86400?s=""+parseInt(i/3600,10).toString()+" hours ago":i<172800?s="a day ago":s=parseInt(i/86400,10).toString()+" days ago","about "+s}function s(){var e="https:"==document.location.protocol?"https:":"http:";if(n.list)return e+"//api.twitter.com/1/"+n.username[0]+"/lists/"+n.list+"/statuses.json?per_page="+n.count+"&callback=?";if(n.query==null&&n.username.length==1)return e+"//api.twitter.com/1/statuses/user_timeline.json?screen_name="+n.username[0]+"&count="+n.count+"&include_rts=1&callback=?";var t=n.query||"from:"+n.username.join(" OR from:");return e+"//search.twitter.com/search.json?&q="+encodeURIComponent(t)+"&rpp="+n.count+"&callback=?"}var n={username:["theprivileges"],list:null,avatar_size:null,count:3,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,query:null,refresh_interval:null};return t&&e.extend(n,t),e.fn.extend({linkUrl:function(){var t=[],n=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;return this.each(function(){t.push(this.replace(n,'<a href="$1">$1</a>'))}),e(t)},linkUser:function(){var t=[],n=/[\@]+([A-Za-z0-9-_]+)/gi;return this.each(function(){t.push(this.replace(n,'<a href="http://twitter.com/$1">@$1</a>'))}),e(t)},linkHash:function(){var t=[],r=/(?:^| )[\#]+([A-Za-z0-9-_]+)/gi;return this.each(function(){t.push(this.replace(r,' <a href="http://search.twitter.com/search?q=&tag=$1&lang=all&from='+n.username.join("%2BOR%2B")+'">#$1</a>'))}),e(t)},capAwesome:function(){var t=[];return this.each(function(){t.push(this.replace(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'))}),e(t)},capEpic:function(){var t=[];return this.each(function(){t.push(this.replace(/\b(epic)\b/gi,'<span class="epic">$1</span>'))}),e(t)},makeHeart:function(){var t=[];return this.each(function(){t.push(this.replace(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>"))}),e(t)}}),this.each(function(t,r){var o=e('<ul class="tweet_list">').appendTo(r),u='<p class="tweet_intro">'+n.intro_text+"</p>",a='<p class="tweet_outro">'+n.outro_text+"</p>",f=e('<p class="loading">'+n.loading_text+"</p>");typeof n.username=="string"&&(n.username=[n.username]),n.loading_text&&e(r).append(f),e(r).bind("load",function(){e.getJSON(s(),function(t){n.loading_text&&f.remove(),n.intro_text&&o.before(u),o.empty();var s=t.results||t;e.each(s,function(t,r){if(n.join_text=="auto")if(r.text.match(/^(@([A-Za-z0-9-_]+)) .*/i))var s=n.auto_join_text_reply;else if(r.text.match(/(^\w+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+) .*/i))var s=n.auto_join_text_url;else if(r.text.match(/^((\w+ed)|just) .*/im))var s=n.auto_join_text_ed;else if(r.text.match(/^(\w*ing) .*/i))var s=n.auto_join_text_ing;else var s=n.auto_join_text_default;else var s=n.join_text;var u=r.from_user||r.user.screen_name,a=r.profile_image_url||r.user.profile_image_url,f='<span class="tweet_join"> '+s+" </span>",l=n.join_text?f:" ",c='<a class="tweet_avatar" href="http://twitter.com/'+u+'"><img src="'+a+'" height="'+n.avatar_size+'" width="'+n.avatar_size+'" alt="'+u+'\'s avatar" title="'+u+'\'s avatar" border="0"/></a>',h=n.avatar_size?c:"",p='<span class="tweet_time"><a href="http://twitter.com/'+u+"/status/"+r.id+'" title="view tweet on twitter">'+i(r.created_at)+"</a></span>",d='<span class="tweet_text">'+e([r.text]).linkUrl().linkUser().linkHash().makeHeart().capAwesome().capEpic()[0]+"</span>";o.append("<li>"+h+p+l+d+"</li>"),o.children("li:first").addClass("tweet_first"),o.children("li:odd").addClass("tweet_even"),o.children("li:even").addClass("tweet_odd")}),n.outro_text&&o.after(a),e(r).trigger("loaded").trigger(s.length==0?"empty":"full"),n.refresh_interval&&window.setTimeout(function(){e(r).trigger("load")},1e3*n.refresh_interval)})}).trigger("load")})}})(jQuery);